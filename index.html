<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Maya ‚ù§Ô∏è</title>

<style>
  body{
    background: linear-gradient(135deg,#ff758c,#ff7eb3);
    min-height:100vh;
    margin:0;
    font-family:"Segoe UI", Arial, Helvetica, sans-serif;
    color:#fff;
    overflow-x:hidden;
  }

  .wrap{
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:32px 16px;
    text-align:center;
  }

  .card{
    width:min(860px, 92vw);
    z-index:2;
  }

  h1{
    font-size: clamp(34px, 5vw, 56px);
    margin: 0 0 14px;
    text-shadow:2px 2px 10px rgba(0,0,0,0.25);
  }

  .msg{
    font-size: clamp(16px, 2.1vw, 22px);
    line-height:1.8;
    margin: 0 auto 22px;
    text-shadow: 1px 1px 6px rgba(0,0,0,0.18);
  }

  .small{
    display:block;
    font-size: clamp(14px, 1.9vw, 18px);
    opacity:0.95;
    margin-top:10px;
  }

  .question{
    font-weight:800;
    font-size: clamp(18px, 2.6vw, 26px);
    margin-top:18px;
  }

  .buttons{
    margin-top:18px;
    display:flex;
    gap:16px;
    justify-content:center;
    align-items:center;
    flex-wrap:wrap;
  }

  button{
    padding:14px 28px;
    font-size:18px;
    border:none;
    border-radius:14px;
    cursor:pointer;
    box-shadow:0 10px 22px rgba(0,0,0,0.25);
    transition: transform 0.12s ease, opacity 0.2s ease;
  }

  button:active{ transform: scale(0.98); }

  .btn-yes{
    background:#ff2e63;
    color:white;
  }

  .btn-no{
    background:#2f2f2f;
    color:white;
    position:relative; /* NO overlap */
  }

  /* Little tease text under buttons */
  .tease{
    margin-top:14px;
    font-size:16px;
    opacity:0.95;
    min-height: 22px;
  }

  /* "Modal" overlay (Terms) */
  .overlay{
    position:fixed;
    inset:0;
    display:none;
    align-items:center;
    justify-content:center;
    background:rgba(0,0,0,0.35);
    z-index:999;
    padding: 18px;
  }

  .modal{
    width:min(560px, 92vw);
    background: rgba(255,255,255,0.18);
    border: 1px solid rgba(255,255,255,0.22);
    border-radius: 18px;
    padding: 18px 18px 16px;
    backdrop-filter: blur(8px);
    box-shadow: 0 14px 30px rgba(0,0,0,0.25);
    text-align:left;
  }

  .modal h3{
    margin: 0 0 10px;
    font-size: 20px;
  }

  .modal ul{
    margin: 10px 0 14px 20px;
    line-height: 1.7;
  }

  .modal .actions{
    display:flex;
    gap:12px;
    justify-content:flex-end;
    flex-wrap:wrap;
    margin-top: 10px;
  }

  .btn-secondary{
    background: rgba(255,255,255,0.18);
    color: white;
    border: 1px solid rgba(255,255,255,0.18);
  }

  .btn-primary{
    background:#ff2e63;
    color:white;
  }

  /* Fake error screen */
  .errorTitle{
    font-size: clamp(34px, 5vw, 54px);
    margin: 0 0 10px;
    text-shadow:2px 2px 10px rgba(0,0,0,0.25);
  }

  .errorMsg{
    font-size: clamp(16px, 2.1vw, 22px);
    line-height:1.7;
    opacity:0.95;
  }

  .heart{
    position:fixed;
    color:red;
    font-size:26px;
    animation: float 5s linear infinite;
    z-index:0;
    pointer-events:none;
  }

  @keyframes float{
    from{ transform:translateY(105vh); opacity:1; }
    to{ transform:translateY(-10vh); opacity:0; }
  }

  .hidden{ display:none !important; }
</style>
</head>

<body>

<!-- Music file must exist in same repo root: perfect.mp3 -->
<audio id="bgMusic" loop preload="auto">
  <source src="perfect.mp3" type="audio/mpeg">
</audio>

<!-- TERMS overlay -->
<div class="overlay" id="termsOverlay">
  <div class="modal">
    <h3>Terms &amp; Conditions üòå</h3>
    <div>By clicking YES, you agree to:</div>
    <ul>
      <li>Unlimited teasing</li>
      <li>Lifelong sarcasm</li>
      <li>Being my forever Valentine ‚ù§Ô∏è</li>
    </ul>
    <div style="opacity:0.95;">Checkbox not required because‚Ä¶ you already know you want this üòÑ</div>

    <div class="actions">
      <button class="btn-secondary" id="termsBackBtn">Go back üòÖ</button>
      <button class="btn-primary" id="termsAcceptBtn">‚òë I regret nothing</button>
    </div>
  </div>
</div>

<div class="wrap">
  <div class="card" id="screenError">
    <div class="errorTitle">‚ùå ERROR 404</div>
    <div class="errorMsg">
      Valentine not found‚Ä¶<br><br>
      Checking again‚Ä¶ please don‚Äôt panic üòå
    </div>
  </div>

  <div class="card hidden" id="screenMain">
    <h1>Maya üíï</h1>

    <p class="msg">
      Your Kanchu has a very important question for you‚Ä¶ ü•∫<br><br>

      Since the day we started talking on <b>Nov 12, 2019</b> and met on <b>Oct 25, 2022</b>,<br>
      my life quietly upgraded from normal mode to happiness mode ‚ù§Ô∏è

      <span class="small">
        (You still owe me one real-life hug ‚Äî WhatsApp video call doesn‚Äôt count üòå‚ù§Ô∏è)<br>
        (And I‚Äôm still waiting for that ‚Äúsee you at the airport‚Äù moment ‚Äî ETA: very soon ‚úàÔ∏èüíï)
      </span>

      <div class="question">Will you be my Valentine?</div>
    </p>

    <div class="buttons">
      <button id="yesBtn" class="btn-yes">YES üíñ</button>
      <button id="noBtn" class="btn-no">NO üôÉ</button>
    </div>

    <div class="tease" id="teaseLine"></div>
  </div>

  <div class="card hidden" id="screenFinal"></div>
</div>

<script>
  const music = document.getElementById("bgMusic");

  const screenError = document.getElementById("screenError");
  const screenMain  = document.getElementById("screenMain");
  const screenFinal = document.getElementById("screenFinal");

  const yesBtn = document.getElementById("yesBtn");
  const noBtn  = document.getElementById("noBtn");
  const teaseLine = document.getElementById("teaseLine");

  const termsOverlay  = document.getElementById("termsOverlay");
  const termsBackBtn  = document.getElementById("termsBackBtn");
  const termsAcceptBtn= document.getElementById("termsAcceptBtn");

  // 1) Fake error -> main after 2 seconds
  setTimeout(() => {
    screenError.classList.add("hidden");
    screenMain.classList.remove("hidden");
    // Change message to "found"
    // (Tiny flourish: show it briefly before switching)
    screenError.innerHTML = `
      <div class="errorTitle">‚úÖ Valentine found.</div>
      <div class="errorMsg">Panic cancelled. üòå‚ù§Ô∏è</div>
    `;
  }, 2000);

  // 2) NO button moves around safely (never overlaps text)
  const noPositions = [
    {x: -60, y: 0},
    {x:  60, y: 0},
    {x: -90, y: -10},
    {x:  90, y: -10},
    {x: -50, y: 20},
    {x:  50, y: 20}
  ];
  let noIdx = 0;

  function moveNo(){
    noIdx = (noIdx + 1) % noPositions.length;
    const p = noPositions[noIdx];
    noBtn.style.transform = `translate(${p.x}px, ${p.y}px)`;
  }

  noBtn.addEventListener("mouseover", moveNo);
  noBtn.addEventListener("click", moveNo);
  noBtn.addEventListener("touchstart", moveNo);

  // 3) YES runs away ONCE
  let yesDodgedOnce = false;

  function dodgeYesOnce(){
    if (yesDodgedOnce) return false;
    yesDodgedOnce = true;

    teaseLine.textContent = "Relax‚Ä¶ I just wanted to see if you were sure üòå";

    // Move YES away temporarily (safe-ish)
    yesBtn.style.transform = "translate(-90px, -12px) rotate(-2deg)";
    setTimeout(() => {
      yesBtn.style.transform = "none";
    }, 650);

    return true;
  }

  // We'll trigger dodge on the first click attempt.
  yesBtn.addEventListener("click", () => {
    const dodged = dodgeYesOnce();
    if (dodged) return; // stop here on first click

    // Second click -> show terms
    termsOverlay.style.display = "flex";
  });

  // Terms buttons
  termsBackBtn.addEventListener("click", (e) => {
    e.stopPropagation();
    termsOverlay.style.display = "none";
    teaseLine.textContent = "Fine‚Ä¶ take your time. I‚Äôm not nervous. üòå";
  });

  // Music start (reliable): only after she accepts terms (user gesture)
  function startMusicFrom20(){
    music.volume = 0.7;

    const seek = () => {
      if (!isNaN(music.duration) && music.duration > 21) {
        try { music.currentTime = 20; } catch(e) {}
      }
    };

    // Try play immediately in this click gesture
    const p = music.play();

    // Seek after metadata/playing to ensure it sticks
    music.addEventListener("loadedmetadata", seek, { once:true });
    music.addEventListener("playing", seek, { once:true });

    if (p && typeof p.catch === "function") {
      p.catch((e) => {
        console.log("Play blocked:", e);
        // On some browsers, user may need one more click.
        alert("Sound blocked. Tap the button once more üòÖ");
      });
    }
  }

  termsAcceptBtn.addEventListener("click", (e) => {
    e.stopPropagation();
    termsOverlay.style.display = "none";
    startMusicFrom20();
    showFinal();
  });

  function showFinal(){
    screenMain.classList.add("hidden");
    screenFinal.classList.remove("hidden");
    screenFinal.innerHTML = `
      <h1 style="margin:0 0 12px; text-shadow:2px 2px 10px rgba(0,0,0,0.25);">
        YAAAY Maya!!! ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è
      </h1>
      <p class="msg" style="margin:0;">
        You just made Kanchu the happiest man alive üíç<br><br>
        Distance may separate us,<br>
        but my heart has always been right there with you üåç‚ù§Ô∏è<br><br>
        I love you today, tomorrow, and forever <br>
        and until I get to hold you again soon üåπ
      </p>
    `;
    hearts();
  }

  function hearts(){
    setInterval(()=>{
      const heart = document.createElement("div");
      heart.className="heart";
      heart.innerHTML="‚ù§Ô∏è";
      heart.style.left = Math.random()*100 + "vw";
      document.body.appendChild(heart);
      setTimeout(()=>heart.remove(), 5000);
    }, 260);
  }
</script>

</body>
</html>


