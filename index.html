<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Maya â¤ï¸</title>

<style>
  body{
    background: linear-gradient(135deg,#ff758c,#ff7eb3);
    min-height:100vh;
    margin:0;
    font-family:"Segoe UI", Arial, Helvetica, sans-serif;
    color:#fff;
    overflow-x:hidden;
  }

  .wrap{
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:32px 16px;
    text-align:center;
  }

  .card{
    width:min(820px, 92vw);
  }

  h1{
    font-size: clamp(34px, 5vw, 54px);
    margin: 0 0 14px;
    text-shadow:2px 2px 10px rgba(0,0,0,0.25);
  }

  .msg{
    font-size: clamp(16px, 2.2vw, 22px);
    line-height:1.8;
    margin: 0 auto 22px;
    text-shadow: 1px 1px 6px rgba(0,0,0,0.18);
  }

  .small{
    display:block;
    font-size: clamp(14px, 2vw, 18px);
    opacity:0.95;
    margin-top:10px;
  }

  .question{
    font-weight:800;
    font-size: clamp(18px, 2.6vw, 26px);
    margin-top:18px;
  }

  .buttons{
    margin-top:18px;
    display:flex;
    gap:16px;
    justify-content:center;
    align-items:center;
    flex-wrap:wrap;
  }

  button{
    padding:14px 28px;
    font-size:18px;
    border:none;
    border-radius:14px;
    cursor:pointer;
    box-shadow:0 10px 22px rgba(0,0,0,0.25);
    transition: transform 0.12s ease;
  }

  button:active{ transform: scale(0.98); }

  #yes{
    background:#ff2e63;
    color:white;
  }

  #no{
    background:#2f2f2f;
    color:white;
    position:relative; /* IMPORTANT: no absolute -> no overlap */
  }

  /* Small status badge top-right */
  .status{
    position:fixed;
    top:14px;
    right:14px;
    background: rgba(255,255,255,0.18);
    border: 1px solid rgba(255,255,255,0.25);
    padding:10px 12px;
    border-radius:999px;
    font-size:14px;
    backdrop-filter: blur(6px);
    user-select:none;
  }

  .heart{
    position:fixed;
    color:red;
    font-size:26px;
    animation: float 5s linear infinite;
    z-index:0;
    pointer-events:none;
  }

  @keyframes float{
    from{ transform:translateY(105vh); opacity:1; }
    to{ transform:translateY(-10vh); opacity:0; }
  }

  .hidden{ display:none !important; }
</style>
</head>

<body>

<!-- Music -->
<audio id="bgMusic" loop preload="auto">
  <source src="perfect.mp3" type="audio/mpeg">
</audio>

<div class="status" id="statusBadge">ğŸ”‡ Music: OFF</div>

<div class="wrap">
  <div class="card" id="content">
    <h1>Maya ğŸ’•</h1>

    <p class="msg">
      Pyaru has a very important question for youâ€¦ ğŸ¥º<br><br>

      Since the day we started talking on <b>Nov 12, 2019</b> and met on <b>Oct 25, 2022</b>,<br>
      my life quietly upgraded from normal mode to happiness mode â¤ï¸

      <span class="small">
        (You still owe me one real-life hug â€” WhatsApp video call doesnâ€™t count ğŸ˜Œâ¤ï¸)<br>
        (And Iâ€™m still waiting for that â€œsee you at the airportâ€ moment â€” ETA: very soon âœˆï¸ğŸ’•)
      </span>

      <div class="question">Will you be my Valentine?</div>
    </p>

    <div class="buttons">
      <button id="yes">YES ğŸ’–</button>
      <button id="no">NO ğŸ™ƒ</button>
    </div>
  </div>
</div>

<script>
  const music = document.getElementById("bgMusic");
  const statusBadge = document.getElementById("statusBadge");
  const content = document.getElementById("content");

  const yesBtn = document.getElementById("yes");
  const noBtn  = document.getElementById("no");

  // Keep a fixed list of "safe" positions for NO so it never overlaps text.
  const noPositions = [
    {x: -60, y: 0},
    {x:  60, y: 0},
    {x: -90, y: -10},
    {x:  90, y: -10},
    {x: -50, y: 20},
    {x:  50, y: 20}
  ];
  let idx = 0;

  function moveNo(){
    idx = (idx + 1) % noPositions.length;
    const p = noPositions[idx];
    noBtn.style.transform = `translate(${p.x}px, ${p.y}px)`;
  }

  noBtn.addEventListener("mouseover", moveNo);
  noBtn.addEventListener("click", moveNo);
  noBtn.addEventListener("touchstart", moveNo);

  function setMusicOnUI(isOn){
    statusBadge.textContent = isOn ? "ğŸ”Š Music: ON" : "ğŸ”‡ Music: OFF";
  }

  // Bulletproof play: call play immediately inside click handler, no awaits first.
  function playFrom20(){
    music.volume = 0.7;

    // Attempt to start
    const p = music.play();

    // Seek to 20s after play starts / metadata available
    const seek = () => {
      if (!isNaN(music.duration) && music.duration > 21) {
        try { music.currentTime = 20; } catch(e) {}
      }
    };

    music.addEventListener("loadedmetadata", seek, { once:true });
    music.addEventListener("playing", () => { seek(); setMusicOnUI(true); }, { once:true });

    if (p && typeof p.catch === "function") {
      p.catch((e) => {
        console.log("Play blocked:", e);
        setMusicOnUI(false);
        alert("Your browser blocked sound. Click YES once more (or click anywhere then YES).");
      });
    }
  }

  yesBtn.addEventListener("click", () => {
    playFrom20();     // start music (gesture safe)
    accepted();       // show message + hearts
  });

  function accepted(){
    content.innerHTML = `
      <h1 style="margin:0 0 12px; text-shadow:2px 2px 10px rgba(0,0,0,0.25);">YAAAY Maya!!! â¤ï¸â¤ï¸â¤ï¸</h1>
      <p class="msg" style="margin:0;">
        You just made Pyaru the happiest man alive ğŸ’<br><br>
        Distance may separate us,<br>
        but my heart has always been right there with you ğŸŒâ¤ï¸<br><br>
        I love you today, tomorrow, and forever ğŸŒ¹
      </p>
    `;
    hearts();
  }

  function hearts(){
    setInterval(()=>{
      const heart = document.createElement("div");
      heart.className="heart";
      heart.innerHTML="â¤ï¸";
      heart.style.left = Math.random()*100 + "vw";
      document.body.appendChild(heart);
      setTimeout(()=>heart.remove(), 5000);
    }, 260);
  }
</script>

</body>
</html>
